const fs = require('fs');
const file = __dirname + '/app/page.tsx';
let c = fs.readFileSync(file, 'utf8');
const orig = c;

// Find insertion point - just before the <style> block at the end
// The pattern is: "7 dager gratis · Ingen bindingstid</p>" then some closing divs then <style>
// Insert the access level section inside the right panel, after the "7 dager gratis" line

const insertAfter = '          )}\n        </div>\n      </div>';
const insertWith = '          )}\n\n          {/* Access level switcher */}\n          <div style={{ marginTop: "32px", paddingTop: "28px", borderTop: "1px solid var(--border)" }}>\n            <p style={{ fontSize: "10px", fontWeight: 700, color: "var(--text-muted)", textTransform: "uppercase", letterSpacing: "0.08em", marginBottom: "14px" }}>Prøv hvert tilgangsnivå</p>\n            <div style={{ display: "flex", flexDirection: "column", gap: "8px" }}>\n\n              {/* Kunde */}\n              <div style={{ display: "flex", alignItems: "center", gap: "14px", padding: "14px 16px", background: "var(--surface)", border: "1px solid var(--border-strong)", borderRadius: "10px" }}>\n                <div style={{ width: "36px", height: "36px", borderRadius: "8px", background: "rgba(255,255,255,0.05)", display: "flex", alignItems: "center", justifyContent: "center", flexShrink: 0 }}>\n                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" strokeWidth="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>\n                </div>\n                <div style={{ flex: 1 }}>\n                  <div style={{ fontSize: "13px", fontWeight: 600, color: "var(--text)" }}>Kunde</div>\n                  <div style={{ fontSize: "11px", color: "var(--text-muted)", marginTop: "2px" }}>Valgfri e-post og passord</div>\n                </div>\n                <span style={{ fontSize: "11px", color: "var(--text-muted)", background: "var(--surface-2)", padding: "4px 10px", borderRadius: "20px", whiteSpace: "nowrap" }}>Denne siden</span>\n              </div>\n\n              {/* Trener */}\n              <button\n                onClick={() => { try { sessionStorage.setItem("bf_trainer", "Erik Hansen"); } catch {} window.location.href = "/trainer"; }}\n                style={{ display: "flex", alignItems: "center", gap: "14px", padding: "14px 16px", background: "var(--surface)", border: "1px solid rgba(232,93,4,0.3)", borderRadius: "10px", textAlign: "left" as const, cursor: "pointer", width: "100%", transition: "border-color 0.15s" }}\n                onMouseEnter={e => { (e.currentTarget as HTMLButtonElement).style.borderColor = "var(--orange)"; }}\n                onMouseLeave={e => { (e.currentTarget as HTMLButtonElement).style.borderColor = "rgba(232,93,4,0.3)"; }}\n              >\n                <div style={{ width: "36px", height: "36px", borderRadius: "8px", background: "rgba(232,93,4,0.08)", display: "flex", alignItems: "center", justifyContent: "center", flexShrink: 0 }}>\n                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--orange)" strokeWidth="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/></svg>\n                </div>\n                <div style={{ flex: 1, minWidth: 0 }}>\n                  <div style={{ fontSize: "13px", fontWeight: 600, color: "var(--text)" }}>Trener</div>\n                  <div style={{ fontSize: "11px", color: "var(--text-muted)", marginTop: "2px", fontFamily: "monospace" }}>erik@bergenfitness.no</div>\n                </div>\n                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="var(--orange)" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>\n              </button>\n\n              {/* Eier */}\n              <button\n                onClick={() => { window.location.href = "/owner"; }}\n                style={{ display: "flex", alignItems: "center", gap: "14px", padding: "14px 16px", background: "var(--surface)", border: "1px solid rgba(184,152,90,0.3)", borderRadius: "10px", textAlign: "left" as const, cursor: "pointer", width: "100%", transition: "border-color 0.15s" }}\n                onMouseEnter={e => { (e.currentTarget as HTMLButtonElement).style.borderColor = "#B8985A"; }}\n                onMouseLeave={e => { (e.currentTarget as HTMLButtonElement).style.borderColor = "rgba(184,152,90,0.3)"; }}\n              >\n                <div style={{ width: "36px", height: "36px", borderRadius: "8px", background: "rgba(184,152,90,0.08)", display: "flex", alignItems: "center", justifyContent: "center", flexShrink: 0 }}>\n                  <svg width="16" height="16" viewBox="0 0 18 18" fill="none"><path d="M2 9h4l2-6 2 12 2-6h4" stroke="#B8985A" strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"/></svg>\n                </div>\n                <div style={{ flex: 1, minWidth: 0 }}>\n                  <div style={{ fontSize: "13px", fontWeight: 600, color: "var(--text)" }}>Eier</div>\n                  <div style={{ fontSize: "11px", color: "var(--text-muted)", marginTop: "2px", fontFamily: "monospace" }}>owner@bergenfitness.no</div>\n                </div>\n                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#B8985A" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>\n              </button>\n\n            </div>\n          </div>\n\n        </div>\n      </div>';

if (c.includes(insertAfter)) {
  c = c.replace(insertAfter, insertWith);
  fs.writeFileSync(file, c, 'utf8');
  console.log('BergenFlow access levels added successfully');
} else {
  console.log('Pattern not found - showing actual file end:');
  const lines = c.split('\n');
  lines.slice(-20).forEach((l, i) => console.log((lines.length - 20 + i) + ': ' + l));
}
